/*
	Copyright: Deux Huit Huit 2014
	License: MIT, see the LICENCE file
*/

:root {
	--er-field-header-height: calc(var(--spacing-thin) + var(--standard-inner-rhythm) * 2);
}

.field-entry_relationship .frame {
	--frame-border-radius: var(--radius-small);
	--frame-background-color: var(--standard-field-background-color);
}

/* FIELD --------*/
	/* Structural base styles --------*/
		.field.field-entry_relationship li {
			margin: 0;
			width: auto;
		}

		.field.field-entry_relationship .frame-header .destructor {
			width: 0;
			flex-basis: 2em;
			flex-shrink: 0;
			white-space: nowrap;
			text-align: right;
			display: inline-flex;
			flex-flow: row-reverse;
			z-index: 1;
		}

		.field.field-entry_relationship .frame-header .destructor:before {
			content: "+";
			margin-left: var(--spacing-micro);
		}

		.field.field-entry_relationship .frame-header .destructor a:not(:hover) {
			color: var(--standard-label-color);
		}

		.field.field-entry_relationship .frame-header .destructor>a {
			margin: 0;
			padding: 0 var(--spacing-micro);
			background-color: var(--standard-field-background-color);
		}

		.field.field-entry_relationship .frame-header .destructor:not(:hover)>a {
			opacity: 0;
			pointer-events: none;
		}


		.field.field-entry_relationship label {
			height: auto;
			margin-top: var(--standard-inner-rhythm);
			margin-bottom: var(--standard-inner-rhythm);
		}

		.field.field-entry_relationship label>span {
			top: auto;
		}


		.field-entry_relationship .frame>ul {
			margin: 0;
			box-sizing: border-box;
			width: 100%;
		}

		.field-entry_relationship .frame>ul>li {
			border-style: dashed;
			border-color: var(--color-ui);
			box-sizing: inherit;
			width: inherit;
		}

		.field-entry_relationship .frame>ul>li:first-child {
			border-top-width: 1px;
		}

		.field-entry_relationship .frame>ul>li:last-child {
			border-bottom-width: 1px;
		}

		.field-entry_relationship .frame>ul>li+li {
			border-top-width: 1px;
		}

		.field-entry_relationship .frame .frame-header {
			padding: var(--standard-inner-rhythm);
			position: relative;
			height: var(--er-field-header-height);
			box-sizing: border-box;
		}

		.field-entry_relationship .frame .frame-header>:first-child {
			flex-grow: 1;
			display: flex;
			justify-content: space-between;
		}

		.field-entry_relationship>footer:not(:hover) {
			opacity: .5;
		}

		.field-entry_relationship>footer {
			display: flex;
			align-items: baseline;
			flex-wrap: wrap;
			/*background-color: rgba(0,0,0,.2);*/
			padding: 0 var(--standard-inner-rhythm);
			border-radius: inherit;
			--standard-field-font-size: var(--text-smaller);
			--standard-label-font-size: var(--text-smaller);
		}

		.field-entry_relationship button {
			margin: 0;
		}

		.field-entry_relationship>footer>fieldset>*+* {
			margin-left: var(--standard-inner-rhythm);
		}

		.field-entry_relationship>footer>fieldset>*>* {
			margin: 0;
		}

		.field-entry_relationship>footer>fieldset {
			display: contents;
		}

		.field-entry_relationship>footer section {
			display: inherit;
			align-items: inherit;
			white-space: nowrap;
		}

		.field-entry_relationship>footer>fieldset>* {
			flex-shrink: 0;
		}


	/* Graphical base styles --------*/
		.field.field-entry_relationship:focus-within {
			background-color: var(--standard-field-background-color);
		}

		.field.field-entry_relationship>label>span {
			color: var(--standard-input-color);
		}

		.field-entry_relationship input,
		.field-entry_relationship select,
		.field-entry_relationship textarea {
			font-weight: 540;
			color: var(--color-main-dark);
		}

	/* Entry container SHOWN specific styles --------*/
		.field.field-entry_relationship li.ctn-is-shown {
			color: var(--color-accent);
			z-index: 1;
		}

		.field.field-entry_relationship .ctn-is-shown~* {
			position: initial;
		}

		.field.field-entry_relationship li.ctn-is-shown .frame-header {
			pointer-events: none;
			z-index: 4;
		}

		.field.field-entry_relationship .ctn-is-shown .frame-header span {
			display: none;
		}

		.field.field-entry_relationship li.ctn-is-shown .destructor {
			opacity: 0;
			pointer-events: none;
		}

	/* Entry container SHOWN BUT NOT LOADED specific styles --------*/
		.field.field-entry_relationship li.ctn-is-shown:not(.ctn-is-loaded) .frame-header:after {
			content: url("data:image/svg+xml,%3Csvg version='1.1' id='L4' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 100 100' enable-background='new 0 0 0 0' xml:space='preserve'%3E%3Ccircle fill='%230D6EFF' stroke='none' cx='6' cy='50' r='6'%3E%3Canimate attributeName='opacity' dur='1s' values='0;1;0' repeatCount='indefinite' begin='0.1'/%3E%3C/circle%3E%3Ccircle fill='%230D6EFF' stroke='none' cx='26' cy='50' r='6'%3E%3Canimate attributeName='opacity' dur='1s' values='0;1;0' repeatCount='indefinite' begin='0.2'/%3E%3C/circle%3E%3Ccircle fill='%230D6EFF' stroke='none' cx='46' cy='50' r='6'%3E%3Canimate attributeName='opacity' dur='1s' values='0;1;0' repeatCount='indefinite' begin='0.3'/%3E%3C/circle%3E%3C/svg%3E");
			width: 60px;
			height: 60px;
			display: block;
			position: absolute;
			z-index: 1;
			right: 0;
			top: 50%;
			transform: translateY(-50%);
		}

	/* Entry container LOADED specific styles --------*/
		.field.field-entry_relationship .ctn-is-loaded {
			position: static;
		}

		.field.field-entry_relationship li.ctn-is-loaded {
			border-style: solid;
		}

		.field.field-entry_relationship .ctn-is-loaded>.frame-header {
			color: var(--color-accent-lighter);
			justify-content: center;
		}


		.field.field-entry_relationship .ctn-is-loaded:after {
			content: "";
			position: absolute;
			pointer-events: none;
			top: 0px;
			right: 0px;
			bottom: 0px;
			left: 0px;
			/*border: 1px solid var(--color-ui);*/
			border-radius: 2px;
			z-index: 1;
		}

		.field.field-entry_relationship .ctn-is-loaded:after {
			transition: all 200ms ease-in 600ms;
		}


		.field.field-entry_relationship .ctn-is-loaded:hover:after {
			transition-delay: 0ms;
		}

		.field.field-entry_relationship .ctn-is-loaded:before {
			content: "";
			position: fixed;
			top: 0;
			right: 0;
			bottom: 0;
			left: 0;
			opacity: .96;
			background-color: var(--color-main-lightest);
			pointer-events: none;
			z-index: 1;
		}

		.field-entry_relationship .frame .ctn-is-loaded .frame-header>:first-child:after {
			/*content: "Mode edition";*/
			position: absolute;
			bottom: calc(100% - .5em);
			font-size: var(--text-smallest);
			background-color: var(--color-main);
			padding: var(--spacing-nano) var(--standard-inner-rhythm);
			line-height: 1.1em;
			left: calc(var(--standard-inner-rhythm) / 2);
			border-radius: var(--radius-small);
		}

		.field-entry_relationship .frame .ctn-is-loaded .frame-header>:first-child {
			justify-content: center;
		}


/* ENTRY CONTAINER --------*/
	/* Base styles --------*/
	[id="entry-relationship-ctn"] {
		pointer-events: none;
		background-color: var(--color-clear);
	}

	li>[id="entry-relationship-ctn"] > .iframe {
		margin-top: calc(-1 * var(--er-field-header-height));
		min-height: var(--er-field-header-height);
	}

	[id="entry-relationship-ctn"] > .iframe {
		transition: opacity 100ms ease-out;
		width: 100%;
		opacity: 0;
		margin-top: -1px;
	}

	[id="entry-relationship-ctn"] iframe {
		display: block;
		width: inherit;
		transition: height 0ms cubic-bezier(0.77, 0, 0.175, 1);
		height: 0;
		opacity: 1;
		border-radius: var(--radius-current);
	}

	[id="entry-relationship-ctn"]:before,
	[id="entry-relationship-ctn"]:after,
	[id="entry-relationship-ctn"] .iframe:before {
		content: "";
		position: absolute;
		box-sizing: border-box;
		pointer-events: none;
		right: 0;
		bottom: 0;
		top: 0;
		left: 0;
		opacity: 0;
		transition: opacity 200ms ease-in-out;
		top: var(--er-field-header-height);
		display: block;
	}

	[id="entry-relationship-ctn"]:before,
	[id="entry-relationship-ctn"]:after {
		transition: opacity 500ms ease-in-out 1200ms;
		z-index: 1;
	}


	[id="entry-relationship-ctn"]:after {
		font-size: var(--text-biggest);
		font-weight: 600;
		text-align: center;
		line-height: 1.2em;
		max-width: 20em;
		text-align: center;
		margin: auto;
		display: flex;
		align-items: center;
		color: var(--standard-field-background-color);
	}

	[id="entry-relationship-ctn"]:before {
		background-color: var(--color-main);
	}

	/* Container is SHOWN specific styles --------*/
	[id="entry-relationship-ctn"].show {
		pointer-events: all;
		position: relative;
		z-index: 3;
	}

	[id="entry-relationship-ctn"].show iframe {
		height: 0px;
	}

	[id="entry-relationship-ctn"].show > .iframe {
		opacity: 1;
		position: relative;
	}

	[id="entry-relationship-ctn"].show .iframe:after {
		content: "";
		position: absolute;
		top: 0;
		right: 0;
		bottom: 0;
		left: 0;
		background-color: var(--standard-field-background-color);
		opacity: 1;
		transition: opacity 100ms ease-in;
	}

	html:lang(en) [id="entry-relationship-ctn"].show:after {
		content: "Please save your changes or close the panel to proceed.";
	}

	html:lang(fr) [id="entry-relationship-ctn"].show:after {
		content: "Veuillez sauvegarder vos changements ou fermer le panneau pour continuer.";
	}

	/* Container is SHOWN but iframe is NOT LOADED specific styles --------*/
	[id="entry-relationship-ctn"].show .iframe:not(.loaded):after {
		opacity: 1;
		background-color: var(--standard-field-background-color);
		display: flex;
		padding-top: var(--standard-inner-rhythm);
		padding-right: var(--standard-inner-rhythm);
		/*align-items: center;*/
		justify-content: flex-end;
		font-size: var(--text-smaller);
		/*font-style: italic;*/
		font-weight: 500;
	}

	/* Container is SHOWN and iframe is LOADED specific styles --------*/
	[id="entry-relationship-ctn"].show .iframe.loaded:after {
		opacity: 0;
		pointer-events: none;
	}

	[id="entry-relationship-ctn"] .iframe.loaded:before {
		border-bottom: 2px solid var(--color-accent);
		box-shadow: inset var(--shadow-up);
		opacity: 1;
		mix-blend-mode: multiply;
	}

	html:hover .ctn-is-loaded [id="entry-relationship-ctn"].show:hover:before,
	html:hover .ctn-is-loaded [id="entry-relationship-ctn"].show:hover:after {
		transition-duration: 120ms;
		transition-delay: 0ms;
	}

	/* Container is SHOWN and LOADED but iframe is NOT LOADED (waiting for save) */
	html:lang(en) .ctn-is-loaded [id="entry-relationship-ctn"].show .iframe:not(.loaded):after {
		content: "Saving...";
		animation-name: colorflash;
		animation-duration: 400ms;
		animation-direction: alternate;
		animation-iteration-count: infinite;
	}

	html:lang(en) .ctn-is-loaded [id="entry-relationship-ctn"].show .iframe:not(.loaded) iframe {
		height: var(--er-field-header-height);
	}


/* IFRAME PAGE --------*/
	/* Base styles */
	html.entry_relationship {
		--backframe-background-color: var(--color-clear);
		--frontframe-background-color: var(--color-clear);
		--standard-field-max-width: 100%;
		--radius-current: 0;
		--standard-outer-rhythm: 0;
		--standard-input-color: var(--color-main-dark);
		--standard-label-color: var(--color-main-dark);
		--standard-table-background-color: var(--color-main-lighter);
		--standard-table-color: var(--color-main-dark);
	}

	html.entry_relationship {
		font-size: 62.5%;
	}

	html.entry_relationship body {
		display: flex;
		flex-direction: column;
		min-height: max-content;
		max-height: max-content;
	}

	html.entry_relationship [id="primary"] {
		overflow: visible;
	}

	html.entry_relationship .field {
		border-left: 0;
		border-right: 0;
	}

	html.entry_relationship .field {
		--standard-field-background-color: var(--color-ui);
	}

	html.entry_relationship .field:hover {
		--standard-field-background-color: var(--color-accent-lighter);
	}


	html:lang(en).entry_relationship body[data-page="new"] [id="controls"]:before {
		content: "New Entry";
	}

	html:lang(fr).entry_relationship body[data-page="new"] [id="controls"]:before {
		content: "Nouvelle entrée";
	}


	html:lang(en).entry_relationship body[data-page="index"] [id="controls"]:before {
		content: "Choose an entry to be added";
	}

	html:lang(fr).entry_relationship body[data-page="index"] [id="controls"]:before {
		content: "Choisissez une entrée à ajouter";
	}

	html:lang(en).entry_relationship body[data-page="new"] [id="controls"]:before,
	html:lang(en).entry_relationship body[data-page="index"] [id="controls"]:before {
		margin-right: auto;
		font-weight: 540;
		/*color: var(--color-accent);*/
		font-size: var(--text-big);
		text-align: center;
	}

	html.entry_relationship [id="controls"] {
		order: -1;
		border-top: 0;
		border-bottom: 2px solid var(--color-main);
		padding: calc(var(--standard-inner-rhythm) / 2) var(--standard-inner-rhythm);
		margin: 0;
		position: sticky;
		top: 0;
		height: var(--er-field-header-height);
		box-sizing: border-box;
		justify-content: space-between;
		background-color: var(--color-main);
		color: var(--color-accent-light);
		/*background-image: linear-gradient(to top, rgba(255,255,255,.4), rgba(255,255,255,.4) 100%);*/
	}

	html.entry_relationship [id="contents"]>form>* {
		flex-shrink: 0;
	}

	html.entry_relationship button[name="action[save]"] {
		margin-right: var(--spacing-micro);
		color: inherit;
		order: 2;

	}

	html.entry_relationship button[name="action[close]"] {
		zoom: .8125;
		color: inherit;
		order: -1;
	}

	html.entry_relationship button[name="action[close]"]:after {
		content: url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' width='19.9px' height='19.9px' viewBox='0 0 19.9 19.9'%3E%3Cpath fill='%23d5ecfc' d='M1,19.9c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4L18.2,0.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4L1.7,19.6C1.5,19.8,1.3,19.9,1,19.9z'/%3E%3Cpath fill='%23d5ecfc' d='M18.9,19.9c-0.3,0-0.5-0.1-0.7-0.3L0.3,1.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l17.9,17.9c0.4,0.4,0.4,1,0,1.4C19.4,19.8,19.2,19.9,18.9,19.9z'/%3E%3C/svg%3E");
	}

	html.entry_relationship button[name="action[close]"]:hover:after {
		filter: invert(.9);
	}


	html.entry_relationship #header,
	html.entry_relationship #nav,
	html.entry_relationship #breadcrumbs,
	html.entry_relationship #footer,
	html.entry_relationship #context,
	html.entry_relationship button[name="action[delete]"],
	html.entry_relationship .actions .modal,
	html.entry_relationship .actions .drawer,
	html.entry_relationship .actions .apply {
		display: none;
	}

	html.entry_relationship {
		scrollbar-color: transparent transparent;
		scrollbar-width: 0px;
		overflow: visible;
	}

	html.entry_relationship .page-index [id="primary"] .actions {
		display: none;
	}

	html.entry_relationship .page-index [id="primary"] td,
	html.entry_relationship .page-index [id="primary"] th {
		padding-right: calc(var(--standard-inner-rhythm) * 2);
	}

	html.entry_relationship .page-index [id="primary"] td:first-of-type,
	html.entry_relationship .page-index [id="primary"] th:first-of-type {
		padding-left: var(--standard-inner-rhythm);
	}

	html.entry_relationship::-webkit-scrollbar {
		background-color: transparent;
		height: 0px;
		width: 0px;
	}

	html.entry_relationship:hover {
		scrollbar-color: var(--scrollbar-thumb-background-color) transparent;

	}



	html.not-allowed [id="primary"]>*:first-child:before {
		content: "";
		position: fixed;
		top: 0;
		right: 0;
		bottom: 0;
		left: 0;
		height: auto;
		z-index: 3;
		cursor: not-allowed;
	}

	html.not-allowed [id="controls"] * {
		opacity: .5;
	}

	@keyframes colorflash {
		from {
			color: transparent;
		}

		to {
			color: var(--color-main);
		}
	}